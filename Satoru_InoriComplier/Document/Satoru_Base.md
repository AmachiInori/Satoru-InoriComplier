# Satoru语言手册

## 1 基本用法

### 1.1 Satoru文件

Satoru的默认格式是由UTF-8编码的普通文本文件，默认扩展名是`.sau`。  

#### 1.1.1 编译

### 1.2 词法

Satoru执行下述的词法标准，Satoru要求输入程序中的每一个词法单元均遵照下述规则，否则编译将无法进行。  

#### 1.2.1 常数字面量

Satoru规定了如下几种常量:

1. 有符号整数:  
   由一个以上0-9的数字组合而成  
   示例 `0`, `01`, `123`, `114514`  
   有符号整形字面量的最大容许范围是64位补码表示的范围  
2. 无符号整数:
   在有符号整数的末尾添加字符`u`或者`U`  
   示例 `0U`, `12u`  
   无符号整形字面量的最大容许范围是64位无符号码表示的范围  
3. 浮点数:  
   由两个有符号整数由小数点`.`连接而成  
   示例 `1.2`, `0.4`  
   注意，本语言不支持形如`.03`或`10.`的表示  
   可以在浮点数之后加入`e`或者`E`, 后接一个带符号或不带符号的整数来表示乘十的若干次幂  
   示例 `0.15E12`, `1.2e+3`, `1.0e-2`  
   注意：不支持在整形数后接续`e`或者`E`的用法，如`1e2`  
   浮点数表示的最大精度是128位IEEE浮点数  
4. 二进制整数:
5. 二进制无符号整数:
6. 十六进制整数:
7. 十六进制无符号整数:

在使用本语言时，你可以在任何常数字面量之前加入`+`或者`-`来修改它的符号，但这一功能在编译器的底层实现中属于语法分析，因此不包含在词法条目内。

#### 1.2.2 标识符与保留字

标识符用作变量和函数的签名。  
标识符可以使用一个及以上的大小写英文字母、数字以及下划线组成，但需注意，标识符的首个字符不可以是数字。  
Satoru规定了如下的保留字:  
```
break char class const continue do double elif else false float for function goto if in int list long order private public return returns short signed switch true unsigned until void while
```
任何情况下编译器均不支持重载保留字为标识符  
在1.3中我们将对各个保留字的意义和用法作基本的解释  

#### 1.2.3 运算符

运算符和变量构成表达式。  

Satoru提供了如下的运算符：  
分隔运算符`,`  
赋值运算符系列`= += -= *= /= %=`  
比较运算符系列`== >= <= > < !=`  
位运算和逻辑运算`|| && ^ | &`  
算术移位运算`<< >>`  
加减法`+ -`  
乘除法`* % /`  
自增自减`++ --`  
算术、逻辑、位取反`- ! ~`  
成员运算`. :`  

#### 1.2.4 字符和字符串

#### 1.2.5 注释

### 1.3 语法

#### 1.3.1 语句

完成某一动作的一行代码被称为语句。Satoru中，语句以分号`;`结束。  
注意，有几种特殊的语句之间可以使用逗号分隔，但不代表所有的语句都支持逗号分隔。

#### 1.3.2 类型与声明语句

Satoru是强类型语言，所有的变量在使用之前均需要声明为明确的类型  
Satoru的变量声明语句形如  
```
typename idname1, idname2, ..;
```
例:
```
int tempInt;
float x, y, z;
```
同时支持在声明语句中初始化变量，可以使用如下三种规范对变量进行初始化：
```
typename idname1 = value1, idname2 = value2, ..;
typename idname1(value1), idname2(value2), ..;
```
需要注意的是，在使用上述两条规范初始化多个变量时，赋值是从左至右依次进行的，所以如下的代码
```
int a(1), b(a), c(b);
```
会使`a`,`b`,`c`均初始化为`1`

#### 1.3.3 赋值语句

赋值语句的基本形式是
```
idname = value; #1#
idname1 = value1, idname2 = value2, ..; #2#
idname1, idname2, .. = value1, value2, ..; #3#
```
需要注意的是，在使用第三条规范时，赋值是协同进行的，所以如下的代码
```
int a = 1, b = 2;
a, b = b, a;
```
会使`a`与`b`交换变量值。  

**注意**: 在使用第三条规范时，程序底层会为所有的左值创建一个临时副本，因此如果在一般赋值情形下，此代码的运行效率可能会偏低。 

#### 1.3.4 运算符的优先级